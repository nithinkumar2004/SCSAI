{% extends "base.html" %}

{% block content %}
<div class="p-4 bg-white shadow-sm rounded">
  <h1 class="h4">Complaint Registration</h1>
  <p class="text-muted">Describe your issue and the AI agent will format and route it automatically.</p>
  <form method="post">
    <div class="mb-3">
      <label class="form-label">Complaint summary</label>
      <input class="form-control" name="summary" placeholder="E.g., Street lights not working in my area">
    </div>
    <div class="mb-3">
      <label class="form-label">Details</label>
      <textarea class="form-control" name="details" rows="4" placeholder="Provide a detailed description"></textarea>
    </div>
    <button class="btn btn-primary" type="submit">Generate formal complaint</button>
  </form>

  {% if formal_complaint %}
  <hr class="my-4">
  <h2 class="h5">AI Draft (Preview)</h2>
  <div class="border rounded p-3 bg-light">
    <p class="mb-1"><strong>Subject:</strong> {{ formal_complaint.subject }}</p>
    <p class="mb-1"><strong>Category:</strong> {{ formal_complaint.category }}</p>
    <p class="mb-1"><strong>Department:</strong> {{ formal_complaint.department }}</p>
    <p class="mb-1"><strong>Summary:</strong> {{ formal_complaint.summary }}</p>
    <p class="mb-1"><strong>Details:</strong> {{ formal_complaint.details }}</p>
    <p class="mb-1"><strong>Requested action:</strong> {{ formal_complaint.requested_action }}</p>
    <p class="mb-0"><strong>Created:</strong> {{ formal_complaint.created_at }}</p>
  </div>
  {% endif %}
</div>
{% endblock %}
